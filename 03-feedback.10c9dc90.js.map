{"version":3,"sources":["js/03-feedback.js"],"names":["refs","form","document","querySelector","input","textarea","FORM_KEY","onFormInput","evt","messageEL","currentTarget","elements","dataToSaved","mail","email","value","message","localStorage","setItem","JSON","stringify","addEventListener","onPopulateForm","savedMessage","getItem","Object","entries","parse","forEach","name","onFormSubmit","preventDefault","emailValue","textereaValue","console","log","reset","removeItem"],"mappings":";AAEA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,kBAC7BC,MAAOF,SAASC,cAAc,wBAC9BE,SAAUH,SAASC,cAAc,4BAI7BG,EAAW,sBAGXC,EAAcC,IACZC,MAAAA,EAAYD,EAAIE,cAAcC,SAMhCC,EAAc,CAElBC,KALWJ,EAAUK,MAAMC,MAM3BC,QALcP,EAAUO,QAAQD,OAQlCE,aAAaC,QAAQ,sBAAwBC,KAAKC,UAAUR,KAG5DZ,EAAKC,KAAKoB,iBAAiB,QAAQd,GAGnC,MAAMe,EAAiB,KACjBC,MAAAA,EAAeN,aAAaO,QAAQlB,GAGpCiB,GACAE,OAAOC,QAAQP,KAAKQ,MAAMJ,IAAgBK,QAAQ,EAAEC,EAAMd,KAAWf,EAAKC,KAAKU,SAASkB,GAAMd,MAAQA,IAG5GO,IAOA,MAAMQ,EAAetB,IACrBA,EAAIuB,iBACEC,MAAAA,EAAavB,UAAUK,MAAMC,MAC7BkB,EAAgBxB,UAAUO,QAAQD,MACrCiB,GAAgC,KAAlBC,IACfC,QAAQC,IAAI,+BAAiCZ,cAC7Cf,EAAIE,cAAc0B,QAClBnB,aAAaoB,WAAY/B,KAI3BG,UAAUY,iBAAiB,SAAWS","file":"03-feedback.10c9dc90.js","sourceRoot":"../src","sourcesContent":["// import throttle from 'lodash.throttle' ;\n\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n  input: document.querySelector('.feedback-form input') ,\n  textarea: document.querySelector('.feedback-form textarea') ,\n\n  \n};\nconst FORM_KEY = \"feedback-form-state\";\n\n\nconst onFormInput = evt => {\n  const messageEL = evt.currentTarget.elements;\n// console.dir(onFormInput) ;\n\nconst mail = messageEL.email.value ; \nconst message = messageEL.message.value ;\n\nconst dataToSaved = {\n\n  mail,\n  message,\n}\n\nlocalStorage.setItem('feedback-form-state' , JSON.stringify(dataToSaved)) ;\n};\n\nrefs.form.addEventListener('input',onFormInput);\n\n// получение из локального хранилища при перезагрузке страницы\nconst onPopulateForm = () => {\nconst savedMessage = localStorage.getItem(FORM_KEY) ;\n\n\n  if (savedMessage ) {\n      Object.entries(JSON.parse(savedMessage )).forEach(([name, value]) => refs.form.elements[name].value = value); // `${name}: ${value}`; `${name}: value`; `${name} = value`\n    }\n};\nonPopulateForm();\n/*\nСабмит формы:\n- Останавливаем поведение по умолчанию\n- Очищаем интерфейс(форму от значений)\n- Убираем отправленные данные из локального хранилища\n*/\nconst onFormSubmit = evt => {\nevt.preventDefault();\nconst emailValue = messageEL.email.value ;\nconst textereaValue = messageEL.message.value ;\nif(emailValue && textereaValue !== \"\"){\n  console.log('Отправляем форму с данными: ' , savedMessage ) ;\n  evt.currentTarget.reset() ; \n  localStorage.removeItem( FORM_KEY) ; \n};\n};\n\nmessageEL.addEventListener('submit' , onFormSubmit) ;"]}